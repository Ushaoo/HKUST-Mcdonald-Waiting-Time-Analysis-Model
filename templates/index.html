// ...existing code...
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Estimated Wait Time</title>
  <style>
    /* --- Global / Header (borrowed visual language from history.html) --- */
    :root{
      --brand-red: #DA291C;
      --brand-yellow: #FFC72C;
      --bg-soft: #FFF7E0;
      --card-bg: #FFFFFF;
      --muted: #666;
    }

    html,body{
      margin:0;
      padding:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg-soft);
      color: #333;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .header{
      background-color: var(--brand-red);
      color:#fff;
      padding:18px 36px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .header h1{
      margin:0;
      font-size:20px;
      font-weight:700;
    }

    .toggle-btn{
      position:absolute;
      right:36px;
      background:var(--brand-yellow);
      color:#222;
      padding:8px 14px;
      border-radius:6px;
      text-decoration:none;
      font-weight:700;
      border:none;
      cursor:pointer;
      font-size:13px;
    }

    .toggle-btn:hover{ opacity:0.95; }

    /* --- Layout --- */
    main{
      max-width: 980px;
      margin: 28px auto;
      padding: 0 20px 40px;
    }

    .card-group{
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    .card{
      background: var(--card-bg);
      border-radius:12px;
      padding:20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.06);
    }

    .card-row{
      display:flex;
      gap:18px;
    }

    .card-left, .card-right{
      flex:1;
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      justify-content:center;
    }

    .card-left h2, .card-right h2, .video-card h2{
      margin:0 0 8px 0;
      color:var(--brand-red);
      font-size:15px;
      font-weight:700;
    }

    .value{
      font-size:36px;
      font-weight:800;
      color:var(--brand-red);
      margin:6px 0 0 0;
    }

    /* Video Card */
    .video-card{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:8px;
    }

    .video-wrapper-wide{
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      background: linear-gradient(180deg, rgba(255,232,208,0.5), rgba(255,248,240,0.2));
      padding:12px;
      border-radius:8px;
      border:1px solid #FFE8D0;
    }

    .video-frame{
      max-width:100%;
      height:auto;
      border-radius:6px;
      border:1px solid #e6e6e6;
      display:block;
    }

    .crowd-meta{
      text-align:center;
      color:var(--muted);
      font-size:14px;
    }

    /* Responsive */
    @media (max-width: 820px){
      .card-row{ flex-direction:column; }
      .toggle-btn{ right:18px; padding:7px 12px; font-size:12px; }
      .header h1{ font-size:18px; }
      .value{ font-size:28px; }
      main{ padding:0 14px 30px; }
    }
  </style>
</head>

<body>
  <header class="header">
    <h1>Estimated Wait Time</h1>
    <a href="/history" class="toggle-btn">View Historical Data</a>
  </header>

  <main>

    <div class="card-group">

      <div class="card card-row">
        <div class="card card-left">
          <h2>Estimated Wait Time</h2>
          <p class="value" id="pickup-time">{{ data.pickup_time }}</p>
        </div>

        <div class="card card-right">
          <h2>Current Crowd Level</h2>
          <p class="value" id="crowd-level">{{ data.crowd_level }}</p>
        </div>
      </div>

      <div class="card video-card">
        <h2>Live Queue View</h2>

        <div class="video-wrapper-wide">
          <img src="/video_feed" class="video-frame" alt="camera stream" id="video-feed">
        </div>
        <p class="crowd-meta">
          <span id="crowd-range">{{ data.crowd_range }}</span>
        </p>
      </div>

    </div>

  </main>

  <script>
    function updateRealtimeData() {
      fetch('/api/realtime')
        .then(res => res.json())
        .then(data => {
          document.getElementById('pickup-time').textContent = data.pickup_time;
          document.getElementById('crowd-level').textContent = data.crowd_level;
          document.getElementById('crowd-range').textContent = data.crowd_range;
        })
        .catch(err => console.error('Failed to update data:', err));
    }

    document.addEventListener('DOMContentLoaded', function() {
      updateRealtimeData();
      setInterval(updateRealtimeData, 2000);
    });
  </script>

</body>
</html>
// ...existing code...